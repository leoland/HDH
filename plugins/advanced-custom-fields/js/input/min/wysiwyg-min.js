!function($){var t=acf.fields.wysiwyg={$el:null,$textarea:null,o:{},set:function(t){return $.extend(this,t),this.$textarea=this.$el.find("textarea"),this.o=acf.helpers.get_atts(this.$el),this.o.id=this.$textarea.attr("id"),this},has_tinymce:function(){var t=!1;return"object"==typeof tinyMCE&&(t=!0),t},get_toolbar:function(){return!!acf.helpers.isset(this,"toolbars",this.o.toolbar)&&this.toolbars[this.o.toolbar]},init:function(){if(!acf.helpers.is_clone_field(this.$textarea)){var e=this.o.id,i=this.get_toolbar(),n="mceAddControl",o="theme_advanced_buttons{i}",c=$.extend({},tinyMCE.settings);if(4==tinymce.majorVersion&&(n="mceAddEditor",o="toolbar{i}"),i)for(var s=1;s<5;s++){var a="";acf.helpers.isset(i,"theme_advanced_buttons"+s)&&(a=i["theme_advanced_buttons"+s]),tinyMCE.settings[o.replace("{i}",s)]=a}tinyMCE.execCommand(n,!1,e),$(document).trigger("acf/wysiwyg/load",e),setTimeout(function(){t.add_events(e)},100),tinyMCE.settings=c,wpActiveEditor=null}},add_events:function(t){var e=tinyMCE.get(t);if(e){var i=$("#wp-"+t+"-wrap"),n=$(e.getBody());i.on("click",function(){$(document).trigger("acf/wysiwyg/click",t)}),n.on("focus",function(){$(document).trigger("acf/wysiwyg/focus",t)}),n.on("blur",function(){$(document).trigger("acf/wysiwyg/blur",t)})}},destroy:function(){var t=this.o.id,e="mceRemoveControl";try{var i=tinyMCE.get(t);if(!i)return;4==tinymce.majorVersion&&(e="mceRemoveEditor");var n=i.getContent();tinyMCE.execCommand(e,!1,t),this.$textarea.val(n)}catch(t){}wpActiveEditor=null}};$(document).on("acf/setup_fields",function(e,i){t.has_tinymce()&&($(i).find(".acf_wysiwyg").each(function(){t.set({$el:$(this)}).destroy()}),setTimeout(function(){$(i).find(".acf_wysiwyg").each(function(){t.set({$el:$(this)}).init()})},0))}),$(document).on("acf/remove_fields",function(e,i){t.has_tinymce()&&i.find(".acf_wysiwyg").each(function(){t.set({$el:$(this)}).destroy()})}),$(document).on("acf/wysiwyg/click",function(t,e){wpActiveEditor=e,container=$("#wp-"+e+"-wrap").closest(".field").removeClass("error")}),$(document).on("acf/wysiwyg/focus",function(t,e){wpActiveEditor=e,container=$("#wp-"+e+"-wrap").closest(".field").removeClass("error")}),$(document).on("acf/wysiwyg/blur",function(t,e){wpActiveEditor=null;var i=tinyMCE.get(e);if(i){var n=i.getElement();i.save(),$(n).trigger("change")}}),$(document).on("acf/sortable_start",function(e,i){t.has_tinymce()&&$(i).find(".acf_wysiwyg").each(function(){t.set({$el:$(this)}).destroy()})}),$(document).on("acf/sortable_stop",function(e,i){t.has_tinymce()&&$(i).find(".acf_wysiwyg").each(function(){t.set({$el:$(this)}).init()})}),$(window).on("load",function(){if(t.has_tinymce()){var e=$("#wp-content-wrap").exists(),i=$("#wp-acf_settings-wrap").exists();mode="tmce",i&&$("#wp-acf_settings-wrap").hasClass("html-active")&&(mode="html"),setTimeout(function(){i&&"html"==mode&&$("#acf_settings-tmce").trigger("click")},1),setTimeout(function(){i&&"html"==mode&&$("#acf_settings-html").trigger("click"),e&&t.add_events("content")},11)}}),$(document).on("click",".acf_wysiwyg a.mce_fullscreen",function(){var t=$(this).closest(".acf_wysiwyg"),e=t.attr("data-upload");"no"==e&&$("#mce_fullscreen_container td.mceToolbar .mce_add_media").remove()})}(jQuery);